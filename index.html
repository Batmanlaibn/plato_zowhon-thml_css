<!DOCTYPE html>
<html lang="mn">
<head>
  <meta charset="UTF-8" />
  <title>–ù—ç–≥—Ç–≥—ç—Å—ç–Ω —Ö—É—É–¥—Å—É—É–¥</title>
  <style>
    .page { display: none; }
    .active { display: block; }
    button { margin: 5px; }
  </style>
</head>
<body>

  <h1>üßë‚Äçüíª –ú–∏–Ω–∏–π —Å–∏—Å—Ç–µ–º</h1>
  
  <!-- üß≠ Navigation -->
  <button onclick="showPage('home')">üè† –ù“Ø“Ø—Ä</button>
  <button onclick="showPage('sign_up')">üìù –ë“Ø—Ä—Ç–≥“Ø“Ø–ª—ç—Ö</button>
  <button onclick="showPage('sign_in')">üîê –ù—ç–≤—Ç—Ä—ç—Ö</button>

  <!-- üè† Home page -->
  <div id="home" class="page active">
    <h2>–¢–∞ —é—É —Ö–∏–π—Ö–∏–π–≥ —Ö“Ø—Å—ç–∂ –±–∞–π–Ω–∞ –≤—ç?</h2>
    <p>–î—ç—ç—Ä—Ö —Ç–æ–≤—á–æ–æ–¥—ã–≥ –¥–∞—Ä–∂ –±“Ø—Ä—Ç–≥“Ø“Ø–ª—ç—Ö —ç—Å–≤—ç–ª –Ω—ç–≤—Ç—ç—Ä—á –æ—Ä–Ω–æ —É—É.</p>
  </div>

  <!-- üìù Sign up -->
  <div id="sign_up" class="page">
    <h2>–ë“Ø—Ä—Ç–≥“Ø“Ø–ª—ç—Ö</h2>
    <form id="signUpForm">
        <label>First Name</label>
        <input type="text" name="firstName" placeholder="–ù—ç—Ä" required /><br>
        <label>Last Name</label>
        <input type="text" name="lastName" placeholder="–û–≤–æ–≥" required /><br>
        <label>Email Address</label>
        <input type="text" name="email" placeholder="–ò-–º—ç–π–ª" required /><br>
        <label>Password</label>
        <input type="password" name="password" placeholder="–ù—É—É—Ü “Ø–≥" required /><br>
        
        <button type="submit">–ë“Ø—Ä—Ç–≥“Ø“Ø–ª—ç—Ö</button>
        
        <p id="signupMessage" style="color:red;"></p>
    </form>
  </div>

  <!-- üîê Sign in -->
  <div id="sign_in" class="page">
    <h2>–ù—ç–≤—Ç—Ä—ç—Ö</h2>
    <form method="POST" action="/login">
      <label>User Name (Last Name)</label>
      <input type="text" name="UserName" placeholder="–û–≤–æ–≥" required />
      <br>
      <label>Password</label>
      <input type="password" name="sign_password" placeholder="–ù—É—É—Ü “Ø–≥" required />
      <br>
      <button type="submit">–ù—ç–≤—Ç—Ä—ç—Ö</button>
    </form>
  </div>

  <!-- üåê Script -->
    <script>
        function showPage(pageId) {
            const pages = document.querySelectorAll('.page');
            pages.forEach(p => p.classList.remove('active'));
            document.getElementById(pageId).classList.add('active');
        }

        // üßæ AJAX-—Ä –±“Ø—Ä—Ç–≥“Ø“Ø–ª—ç—Ö
        document.getElementById('signUpForm').addEventListener('submit', async function (e) {
            e.preventDefault();
            const form = e.target;
            const formData = new FormData(form);
            const data = new URLSearchParams(formData);

            try {
            const res = await fetch('/register', {
                method: 'POST',
                
                body: data,
            });

            if (res.ok) {
                showPage('home'); // üëà –ê–º–∂–∏–ª—Ç—Ç–∞–π –±–æ–ª Home —Ä—É—É —à–∏–ª–∂“Ø“Ø–ª–Ω—ç
                alert("–ê–º–∂–∏–ª—Ç—Ç–∞–π –±“Ø—Ä—Ç–≥—ç–≥–¥–ª—ç—ç!");
                form.reset();
                
            } else {
                const error = await res.text();
                document.getElementById('signupMessage').innerText = error;
            }
            } catch (err) {
            document.getElementById('signupMessage').innerText = '–ê–ª–¥–∞–∞ –≥–∞—Ä–ª–∞–∞.';
            }
        });
    </script>

</body>
</html>
